<!DOCTYPE html>
<html>
<head>
  <title>taboo.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="doc-style.css" />
  <script src="doc-filelist.js"></script>
  <script>
    var relativeDir = "", thisFile = "taboo.js", defaultSidebar = false;
  </script>
  <script src="doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h2">
        <a href="#table%20constructor">Table Constructor</a>
      </div>
      <div class="heading h2">
        <a href="#addcolumns()">addColumns()</a>
      </div>
      <div class="heading h2">
        <a href="#addcolumn()">addColumn()</a>
      </div>
      <div class="heading h2">
        <a href="#getcolumnheaders()">getColumnHeaders()</a>
      </div>
      <div class="heading h2">
        <a href="#addrows()">addRows()</a>
      </div>
      <div class="heading h2">
        <a href="#getcolumn()">getColumn()</a>
      </div>
      <div class="heading h2">
        <a href="#getrow()">getRow()</a>
      </div>
      <div class="heading h2">
        <a href="#getrowsascellobjects()">getRowsAsCellObjects()</a>
      </div>
      <div class="heading h2">
        <a href="#getrowsascellobjectswhere()">getRowsAsCellObjectsWhere()</a>
      </div>
      <div class="heading h2">
        <a href="#columntoobjects()">columnToObjects()</a>
      </div>
      <div class="heading h2">
        <a href="#relatedcolumn()">relatedColumn()</a>
      </div>
      <div class="heading h2">
        <a href="#print()">print()</a>
      </div>
      <div class="heading h2">
        <a href="#joinleft()">joinLeft()</a>
      </div>
      <div class="heading h2">
        <a href="#innerjoin()">innerJoin()</a>
      </div>
      <div class="heading h2">
        <a href="#clone()">clone()</a>
      </div>
      <div class="heading h2">
        <a href="#_clean()">_clean()</a>
      </div>
      <div class="heading h2">
        <a href="#_addrowcellobjects()">_addRowCellObjects()</a>
      </div>
      <div class="heading h2">
        <a href="#_addcell()">_addCell()</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>taboo.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary">
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">author</div>
    <div class="dox_tag_detail">
      <span>mrmagooey</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="table%20constructor">
  <h2>
    <a href="#table%20constructor" name="table%20constructor" class="pilcrow">&#182;</a>
    Table Constructor
  </h2>
</div>


<p>Creates a new Table object</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">tableName</span>
      <span class="dox_type">String</span>
      <span>The name of this table</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Table</span><span class="p">(</span><span class="nx">tableName</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_data</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="nx">tableName</span><span class="o">:</span><span class="nx">tableName</span><span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addcolumns()">
  <h2>
    <a href="#addcolumns()" name="addcolumns()" class="pilcrow">&#182;</a>
    addColumns()
  </h2>
</div>


<p>Add an array of empty columns.
Pre-existing column names will be ignored.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">colNamesArray</span>
      <span class="dox_type">Array</span>
      <span>Array of column names.</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addColumns</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colNamesArray</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">colNamesArray</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">addColumn</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addcolumn()">
  <h2>
    <a href="#addcolumn()" name="addcolumn()" class="pilcrow">&#182;</a>
    addColumn()
  </h2>
</div>


<p>Add a single empty column with name colName
Pre-existing column names will be ignored.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_type">string</span>
      <span>colName Column name</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addColumn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colName</span><span class="p">){</span>
        <span class="c1">// Adds an column object to the table iff the column object</span>
        <span class="c1">// with the colName does not already exist</span>
        <span class="kd">var</span> <span class="nx">column</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">column</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">colName</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="c1">// check if this is a new column</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">column</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>
            <span class="c1">// add if column doesn&#39;t exist</span>
            <span class="nx">column</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">header</span><span class="o">:</span> <span class="nx">colName</span><span class="p">,</span>
                <span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>                           
            <span class="p">};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">column</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getcolumnheaders()">
  <h2>
    <a href="#getcolumnheaders()" name="getcolumnheaders()" class="pilcrow">&#182;</a>
    getColumnHeaders()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
      <span>All column names</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">getColumnHeaders</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">column</span><span class="p">.</span><span class="nx">header</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addrows()">
  <h2>
    <a href="#addrows()" name="addrows()" class="pilcrow">&#182;</a>
    addRows()
  </h2>
</div>


<p>If passed an array of objects, the keys will be treated as the column
headings and the values treated as the cell values.</p>
  </div>
  <div class="body"><p><code>[{"col1":"foo", "col2":"bar", "col3":"baz"}, 
{"col1":"asdf", "col2":"asdf1", "col3":"asdf2"}]</code></p>

<p>If passed an array of arrays, the arrays will be added by index position,
with items beyond the current number of columns being discarded.</p>

<p><code>[["foo", "bar", "baz"], ["asdf", "asdf1", "asdf2"]]</code></p>
  </div>
  <div class="details">
    <div class="dox_tag_title">params</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Array</span>
      <span>rows Takes an array of either objects or arrays.          </span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addRows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rows</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getColumnHeaders</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">rows</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">row</span><span class="p">)){</span>
                <span class="nx">row</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
                    <span class="nx">_this</span><span class="p">.</span><span class="nx">_addCell</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">cell</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">_clean</span><span class="p">();</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">row</span><span class="p">)){</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">pairs</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">pair</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                    <span class="nx">_this</span><span class="p">.</span><span class="nx">_addCell</span><span class="p">(</span><span class="nx">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
                <span class="p">});</span>
                <span class="nx">_this</span><span class="p">.</span><span class="nx">_clean</span><span class="p">();</span>
            <span class="p">}</span> 
        <span class="p">});</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getcolumn()">
  <h2>
    <a href="#getcolumn()" name="getcolumn()" class="pilcrow">&#182;</a>
    getColumn()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">colName</span>
      <span class="dox_type">String</span>
      <span>The name of the column to be returned</span>
    </div>
    <div class="dox_tag_title">Return</div>
    <div class="dox_tag_detail">
      <span class="dox_type">column</span>
      <span></span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">getColumn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colName</span><span class="p">){</span>
        <span class="c1">// </span>
        <span class="kd">var</span> <span class="nx">col</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">columnObject</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">columnObject</span><span class="p">.</span><span class="nx">header</span> <span class="o">==</span> <span class="nx">colName</span><span class="p">){</span>
                <span class="nx">col</span> <span class="o">=</span> <span class="nx">columnObject</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span> 
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">col</span><span class="p">;</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getrow()">
  <h2>
    <a href="#getrow()" name="getrow()" class="pilcrow">&#182;</a>
    getRow()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">index</span>
      <span class="dox_type">Integer</span>
      <span>The row index to be returned</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
      <span></span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">getRow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span>
        <span class="c1">// return an array of cell objects at row[index]</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
            <span class="k">return</span> <span class="p">{</span><span class="nx">header</span><span class="o">:</span><span class="nx">column</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">],</span> <span class="nx">data</span><span class="o">:</span><span class="nx">column</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="nx">index</span><span class="p">]}</span> <span class="p">;</span>
        <span class="p">});</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getrowsascellobjects()">
  <h2>
    <a href="#getrowsascellobjects()" name="getrowsascellobjects()" class="pilcrow">&#182;</a>
    getRowsAsCellObjects()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
      <span>All rows in the table as an array of arrays of cell objects</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// Return an array (rows) of arrays (cell objects)</span>
        <span class="c1">// rows = [row, row, row]</span>
        <span class="c1">// row = [{header:&#39;name&#39;, data:&#39;abc&#39;}, {...}, {...}]</span>
        <span class="kd">var</span> <span class="nx">cellColumns</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="nx">cellColumns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span><span class="nx">header</span><span class="o">:</span><span class="nx">column</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">],</span> <span class="nx">data</span><span class="o">:</span><span class="nx">cell</span><span class="p">};</span>
            <span class="p">}));</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">zip</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">cellColumns</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">getRows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// Return an array (rows) of arrays (cell objects)</span>
        <span class="c1">// rows = [row, row, row]</span>
        <span class="c1">// row = [{header:&#39;name&#39;, data:&#39;abc&#39;}, {...}, {...}]</span>
        <span class="kd">var</span> <span class="nx">cellColumns</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="nx">cellColumns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">cell</span><span class="p">;</span>
            <span class="p">}));</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">zip</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">cellColumns</span><span class="p">);</span>        
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getrowsascellobjectswhere()">
  <h2>
    <a href="#getrowsascellobjectswhere()" name="getrowsascellobjectswhere()" class="pilcrow">&#182;</a>
    getRowsAsCellObjectsWhere()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">params</div>
    <div class="dox_tag_detail">
      <span class="dox_type">String</span>
      <span>header</span>
    </div>
    <div class="dox_tag_title">params</div>
    <div class="dox_tag_detail">
      <span class="dox_type">String</span>
      <span>key </span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
      <span>All rows in the table satisfying the header and key constraints</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">getRowsWhere</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">header</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
        <span class="c1">// Returns the same as getRowsAsCellObjects except that each row is checked for </span>
        <span class="c1">// a cell that has the `header` and `key` arguments</span>
        <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span>  <span class="nx">_</span><span class="p">.</span><span class="nx">chain</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">())</span>
                <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
                    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span>  <span class="nx">_</span><span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="p">{</span><span class="nx">header</span><span class="o">:</span><span class="nx">header</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span><span class="nx">key</span><span class="p">});</span>
                    <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span>
                        <span class="k">return</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                    <span class="p">});</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">value</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">rows</span><span class="p">;</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="columntoobjects()">
  <h2>
    <a href="#columntoobjects()" name="columntoobjects()" class="pilcrow">&#182;</a>
    columnToObjects()
  </h2>
</div>


<p>Object transformation method, generally for moving a denormalized table
into a set of nested objects.
Returns an array of objects like: 
<code>[{name:'original column item', related:
{'related column name': ['first related', 'second related']}]</code></p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array

</span>
      <span>{Array}</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">columnToObjects</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colName</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="nx">colName</span><span class="p">)),</span>
            <span class="nx">colObjects</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                <span class="k">return</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">related</span><span class="o">:</span><span class="p">{},</span> <span class="nx">_index</span><span class="o">:</span><span class="nx">index</span><span class="p">};</span>
            <span class="p">}),</span>
            <span class="nx">rows</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">();</span>
        <span class="nx">colObjects</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">columnObj</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="nx">rows</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">joinCell</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">columnObj</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                <span class="p">});</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">joinCell</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>
                    <span class="c1">// get the other cells in the row</span>
                    <span class="kd">var</span> <span class="nx">remainingCells</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span>
                        <span class="k">return</span> <span class="nx">cell</span> <span class="o">==</span> <span class="nx">joinCell</span><span class="p">;</span>
                    <span class="p">});</span>
                    <span class="c1">// start putting the related cells into the columnObj object</span>
                    <span class="nx">remainingCells</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">rc</span><span class="p">){</span>
                        <span class="c1">// get the columnObj related entry</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">columnObj</span><span class="p">.</span><span class="nx">related</span><span class="p">[</span><span class="nx">rc</span><span class="p">.</span><span class="nx">header</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>
                            <span class="nx">columnObj</span><span class="p">.</span><span class="nx">related</span><span class="p">[</span><span class="nx">rc</span><span class="p">.</span><span class="nx">header</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
                        <span class="p">}</span>
                        <span class="nx">columnObj</span><span class="p">.</span><span class="nx">related</span><span class="p">[</span><span class="nx">rc</span><span class="p">.</span><span class="nx">header</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">rc</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
                    <span class="p">});</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">// continue</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">colObjects</span><span class="p">;</span>   
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="relatedcolumn()">
  <h2>
    <a href="#relatedcolumn()" name="relatedcolumn()" class="pilcrow">&#182;</a>
    relatedColumn()
  </h2>
</div>


<p>Return a set of related column objects</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">relatedColumn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">primaryColumn</span><span class="p">,</span> <span class="nx">secondaryColumn</span><span class="p">){</span>
        <span class="c1">// </span>
        <span class="kd">var</span> <span class="nx">columnObjects</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">columnToObjects</span><span class="p">(</span><span class="nx">primaryColumn</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">columnObjects</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">related</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">columnName</span> <span class="o">==</span> <span class="nx">secondaryColumn</span><span class="p">;</span>
            <span class="p">});</span>
            
            <span class="k">return</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">related</span><span class="o">:</span><span class="nx">related</span><span class="p">.</span><span class="nx">data</span><span class="p">};</span>
        <span class="p">});</span>

    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="print()">
  <h2>
    <a href="#print()" name="print()" class="pilcrow">&#182;</a>
    print()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
      <span>pretty printed version of the table</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">printColumnSize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">printString</span> <span class="o">=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">columnLengths</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="c1">// early exit conditions</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="nx">columnLengths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">header</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">printColumnSize</span><span class="p">));</span>
            <span class="nx">printString</span> <span class="o">+=</span> <span class="nx">column</span><span class="p">.</span><span class="nx">header</span> 
                <span class="o">+</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">header</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">printColumnSize</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">header</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="o">+</span> <span class="s1">&#39; | &#39;</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">printString</span> <span class="o">+=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">rowIndex</span><span class="p">,</span> <span class="nx">array</span><span class="p">){</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">cellIndex</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">cellStr</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
                    <span class="nx">cellRepr</span><span class="p">;</span>
                <span class="c1">// truncate cell.data if longer than cell.header</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">cellStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">columnLengths</span><span class="p">[</span><span class="nx">cellIndex</span><span class="p">]){</span>
                    <span class="nx">cellRepr</span> <span class="o">=</span> <span class="nx">cellStr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">columnLengths</span><span class="p">[</span><span class="nx">cellIndex</span><span class="p">]</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
                    <span class="nx">cellRepr</span> <span class="o">=</span> <span class="nx">cellRepr</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span><span class="p">;</span>
                    <span class="c1">// otherwise pad it with spaces</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">cellStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">columnLengths</span><span class="p">[</span><span class="nx">cellIndex</span><span class="p">]){</span>
                    <span class="kd">var</span> <span class="nx">padding</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">columnLengths</span><span class="p">[</span><span class="nx">cellIndex</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="nx">cellStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
                    <span class="nx">cellRepr</span> <span class="o">=</span> <span class="nx">cellStr</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">printString</span> <span class="o">+=</span> <span class="nx">cellRepr</span> <span class="o">+</span> <span class="s2">&quot; | &quot;</span><span class="p">;</span>
            <span class="p">});</span>
            <span class="nx">printString</span> <span class="o">+=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">printString</span> <span class="o">+=</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">printString</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="joinleft()">
  <h2>
    <a href="#joinleft()" name="joinleft()" class="pilcrow">&#182;</a>
    joinLeft()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">leftKey</span>
      <span class="dox_type">String</span>
      <span>The key in this table to be joined on</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rightTable</span>
      <span class="dox_type">Table</span>
      <span></span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rightKey</span>
      <span class="dox_type">String</span>
      <span>The key in the right table to be joined on</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Table</span>
      <span>The new table</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">joinLeft</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">leftKey</span><span class="p">,</span> <span class="nx">rightTable</span><span class="p">,</span> <span class="nx">rightKey</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
            <span class="nx">leftHeaders</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">getColumnHeaders</span><span class="p">(),</span>
            <span class="nx">right</span> <span class="o">=</span> <span class="nx">rightTable</span><span class="p">,</span>
            <span class="nx">joinResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Table</span><span class="p">(),</span>
            <span class="nx">keyMatchFound</span><span class="p">,</span>
            <span class="nx">incrementRegex</span> <span class="o">=</span> <span class="sr">/(.*-)(\d)/gm</span><span class="p">;</span>
        <span class="nx">left</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="nx">keyMatchFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">leftKeyValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span><span class="k">return</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">leftKey</span><span class="p">;});</span>
            <span class="nx">right</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">array</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">rightKeyValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span><span class="k">return</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">rightKey</span><span class="p">;});</span>
                <span class="c1">// matching left and right keys</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">rightKeyValue</span><span class="p">,</span> <span class="nx">leftKeyValue</span><span class="p">))</span> <span class="p">{</span>
                    <span class="c1">// drop one of the matching key cells, otherwise we will add two cells</span>
                    <span class="c1">// with the same header, which the table structure doesn&#39;t really support</span>
                    <span class="kd">var</span> <span class="nx">modifiedRightRow</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
                        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">leftKeyValue</span><span class="p">);</span>
                    <span class="p">});</span>
                    <span class="c1">// check for similarly named columns and rename if there are collisions</span>
                    <span class="nx">modifiedRightRow</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">modifiedRightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">leftHeaders</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">header</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
                            <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">incrementRegex</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">header</span><span class="p">);</span>
                            <span class="c1">// increment the name by one</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span> <span class="o">&amp;&amp;</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">3</span><span class="p">){</span>
                                <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">+</span> <span class="s1">&#39;-1&#39;</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="c1">// add the concatenated result to the new table</span>
                    <span class="nx">joinResult</span><span class="p">.</span><span class="nx">_addRowCellObjects</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">modifiedRightRow</span><span class="p">));</span>
                    <span class="nx">keyMatchFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> 
                <span class="c1">// Since this is a left join, we stil want the left table row to be included</span>
                <span class="c1">// in the final join table if no key matches are found</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">keyMatchFound</span> <span class="o">==</span> <span class="kc">false</span><span class="p">){</span>
                    <span class="nx">joinResult</span><span class="p">.</span><span class="nx">_addRowCellObjects</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">joinResult</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="innerjoin()">
  <h2>
    <a href="#innerjoin()" name="innerjoin()" class="pilcrow">&#182;</a>
    innerJoin()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">leftKey</span>
      <span class="dox_type">String</span>
      <span>The key in this table to be joined on</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rightTable</span>
      <span class="dox_type">Table</span>
      <span></span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rightKey</span>
      <span class="dox_type">String</span>
      <span>The key in the right table to be joined on</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Table</span>
      <span>The new table</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">innerJoin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">leftKey</span><span class="p">,</span> <span class="nx">rightTable</span><span class="p">,</span> <span class="nx">rightKey</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
            <span class="nx">leftHeaders</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">getColumnHeaders</span><span class="p">(),</span>
            <span class="nx">right</span> <span class="o">=</span> <span class="nx">rightTable</span><span class="p">,</span>
            <span class="nx">joinResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Table</span><span class="p">(),</span>
            <span class="nx">keyMatchFound</span><span class="p">,</span>
            <span class="nx">incrementRegex</span> <span class="o">=</span> <span class="sr">/(.*-)(\d)/gm</span><span class="p">;</span>
        
        <span class="nx">left</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="nx">keyMatchFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">leftKeyValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span><span class="k">return</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">leftKey</span><span class="p">;});</span>
            <span class="nx">right</span><span class="p">.</span><span class="nx">getRowsAsCellObjects</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">array</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">rightKeyValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span><span class="k">return</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">rightKey</span><span class="p">;});</span>
                <span class="c1">// matching left and right keys</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">rightKeyValue</span><span class="p">,</span> <span class="nx">leftKeyValue</span><span class="p">))</span> <span class="p">{</span>
                    <span class="c1">// drop one of the matching key cells, otherwise we will add two cells</span>
                    <span class="c1">// with the same header, which the table structure doesn&#39;t really support</span>
                    <span class="kd">var</span> <span class="nx">modifiedRightRow</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">rightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
                        <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">leftKeyValue</span><span class="p">);</span>
                    <span class="p">});</span>
                    <span class="c1">// check for similarly named columns and rename if there are collisions</span>
                    <span class="nx">modifiedRightRow</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">modifiedRightRow</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">leftHeaders</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">header</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
                            <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">incrementRegex</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">header</span><span class="p">);</span>
                            <span class="c1">// increment the name by one</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span> <span class="o">&amp;&amp;</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">3</span><span class="p">){</span>
                                <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">matches</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">header</span> <span class="o">+</span> <span class="s1">&#39;-1&#39;</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="c1">// add the concatenated result to the new table</span>
                    <span class="nx">joinResult</span><span class="p">.</span><span class="nx">_addRowCellObjects</span><span class="p">(</span><span class="nx">leftRow</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">modifiedRightRow</span><span class="p">));</span>
                    <span class="nx">keyMatchFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">joinResult</span><span class="p">;</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="clone()">
  <h2>
    <a href="#clone()" name="clone()" class="pilcrow">&#182;</a>
    clone()
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span>a clone of this table</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">)),</span>
            <span class="nx">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Table</span><span class="p">();</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">_data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">t</span><span class="p">;</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="_clean()">
  <h2>
    <a href="#_clean()" name="_clean()" class="pilcrow">&#182;</a>
    _clean()
  </h2>
</div>


<p>Ensures the integrity of the underlying table data structure, by: 
1. Make the table 'square', i.e. all the columns are the same length, 
padding with undefineds when adding cells to columns.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">_clean</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">maxColumnLength</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">colLength</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">colLength</span> <span class="o">&gt;</span> <span class="nx">memo</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">colLength</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">memo</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">column</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">maxColumnLength</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">column</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
            <span class="p">};</span>
        <span class="p">});</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="_addrowcellobjects()">
  <h2>
    <a href="#_addrowcellobjects()" name="_addrowcellobjects()" class="pilcrow">&#182;</a>
    _addRowCellObjects()
  </h2>
</div>


<p>Add a row to this table. 
Row is an array of cell objects.
<code>row = [{header:'blah', data:}, {header:'blah', data:}]</code>
Any cell object with a new header will add that header to the table</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">params</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Array</span>
      <span>row Array of internal cell objects</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">_addRowCellObjects</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="s1">&#39;header&#39;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">uniqueHeaders</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span><span class="nx">headers</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">uniqueHeaders</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="nx">headers</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
            <span class="k">throw</span> <span class="s2">&quot;Can\&#39;t add a row with duplicate headers&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_clean</span><span class="p">();</span>
        <span class="nx">row</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">){</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">_addCell</span><span class="p">(</span><span class="nx">cell</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">],</span> <span class="nx">cell</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]);</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_clean</span><span class="p">();</span>
    <span class="p">};</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="_addcell()">
  <h2>
    <a href="#_addcell()" name="_addcell()" class="pilcrow">&#182;</a>
    _addCell()
  </h2>
</div>


<p>Internal method of adding cell data to columns. Shouldn't be directly used
as by itself it leaves the table in an inconsistent state.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">_addCell</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colName</span><span class="p">,</span> <span class="nx">cellValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">column</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">column</span><span class="p">.</span><span class="nx">header</span> <span class="o">===</span> <span class="nx">colName</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="c1">// check if this is a new column</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">column</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>
            <span class="c1">// add if column doesn&#39;t exist</span>
            <span class="nx">column</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">header</span><span class="o">:</span> <span class="nx">colName</span><span class="p">,</span>
                <span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>                           
            <span class="p">};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">column</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// finally add data to column</span>
        <span class="nx">column</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">cellValue</span><span class="p">);</span>
    <span class="p">};</span>
    
<span class="p">}</span> <span class="c1">// end of Table</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
